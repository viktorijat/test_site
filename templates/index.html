<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js" type="text/javascript"></script>



    <script>

        $(document).ready(function () {



        $("#birthday").click(function() {
            $("#birthday").datepicker();
         });

        $("#button_log_in").click(function(){

            var name = $("#name_log_in").val();
            var password = $("#pass_log_in").val();

            $.ajax({
                url: '{% url "log_in_form_event" %}',
                type: 'POST',
                data: {'csrfmiddlewaretoken': '{{csrf_token}}', 'name': name,  'password': password},
                dataType: 'json',
                success: function (data) {
                if (data.success) {

                    $("#log_in").hide()
                    $("#register_div").hide()
                    $("#log_out").show()
                    $("#expence_info").show()

                    $("#my_name").html(data.name);
                    $("#my_pass").html(data.password);





                    alert(data.note);


                    }
                else{
                    alert(data.note);
                    $("#myname").text(data.name);
                    $("#mypass").text(data.password);
                    }
                $("body").append(data.success);


                }
            });

        });

        $("#button_register").click(function(){
            var name = $("#name").val();
            var email = $("#email").val();
            var password = $("#pass").val();
            var password1 = $("#pass1").val();

            $.ajax({
                url: '{% url "register_form_event" %}',
                type: 'POST',
                data: {'csrfmiddlewaretoken': '{{csrf_token}}', 'name': name, 'email': email, 'password': password, 'password1': password1},
                dataType: 'json',
                success: function (data) {
                if (data.success) {

                    $("#log_in").hide()
                    $("#register_div").hide()
                    $("#log_out").show()
                    $("#expence_info").show()


                    $("#my_name").html(data.name);
                    $("#my_pass").html(data.password);

                    alert(data.note);



                    }
                else{

                    alert(data.note);
                    }
                $("body").append(data.success);
                }
            });

        });
        $("#button_log_out").click(function(){

            var name = $("#my_name").html();
            var password = $("#my_pass").html();
            $.ajax({
                url: '{% url "logout_user" %}',
                type: 'POST',
                data: {'csrfmiddlewaretoken': '{{csrf_token}}', 'name': name, 'password': password},
                dataType: 'json',
                success: function(data){
                    if (data.success){
                    alert(data.note);
                    $("#log_out").hide()
                    $("#log_in").show()
                    $("#register_div").show()
                    $("#expence_info").hide()
                    $("#name_log_in").text("");
                    $("#pass_log_in").text("");
                    $("#name").text("");
                    $("#email").text("");
                    $("#pass").text("");
                    $("#pass1").text("");
                    }
                else{
                    alert(data.note);
                    }
                }
            });
        });

    $("#submit_expence").click(function(){

            var amount = $("#amount").val();
            var description = $("#description").val();
            var date = $("#date").val();
            var time = $("#time").val();
            var comment = $("#comment").val();


            var name = $("#my_name").html();
            var password = $("#my_pass").html();

            $.ajax({

                    url: '{% url "expense_added" %}',
                    type: 'POST',
                    data: {'csrfmiddlewaretoken': '{{csrf_token}}', 'name': name, 'password': password, 'amount': amount, 'description': description, 'date': date, 'time': time, 'comment': comment},
                    dataType: 'json',
                    success: function(data){

                        if (data.success){
                        alert(data.note);

                        }

                    else{

                        alert(data.note);
                    }

                }

            });

        });


});

    </script>

</head>
<body>


<div id="log_in">

    <p><label>Username</label></p>
    <p><input type="text" id='name_log_in'></p>

    <p><label>Password</label></p>
    <p><input type="password" id='pass_log_in'></p>

    <p><input type="button" id="button_log_in" value="log in"></p>

</div>


<div id="register_div">

    <p><label>Username</label></p>
    <p><input type="text" id='name'></p>

    <p><label>Email</label></p>
    <p><input type="text" id='email'></p>

    <p><label>Birthday</label></p>
    <p><input type="text" id='birthday'></p>

    <p><label>Password</label></p>
    <p><input type="password" id='pass'></p>

    <p><label>Retype Password</label></p>
    <p><input type="password" id='pass1'></p>

    <p><input type="button" id="button_register" value="register"></p>

</div>

<div id="log_out" style="display: none;">

    <input type="button" id="button_log_out" value="log out">

</div>

<div id='myname'>

<label id="my_name" visible="false"></label>

</div>

<div id='mypass'>

<label id="my_pass" visible="false"></label>


</div>






</body>
</html>